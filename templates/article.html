{% extends "base.html" %}

{% block title %}{{ article.title }}{% endblock %}

{% block content %}
<header class="header">
    <a href="{{ url_for('index') }}" class="back-link">‚Üê Home</a>
    <h1 class="title">{{ article.title }}</h1>
    <p class="meta-info">
        {% if article.delivered_date %}
            <span class="date">Delivered: {{ article.delivered_date }}</span>
        {% endif %}
        {% if article.bench_size %}
            / {{ article.bench_size }}-Judge Constitution Bench
        {% endif %}
    </p>
</header>

{% if article.judges %}
<div class="justice-section">
    {% for judge in article.judges %}
    <div class="justice-card {{ judge.opinion }}">
        <div class="photo-circle">{{ judge.initials }}</div>
        <p>{{ judge.name }}</p>
    </div>
    {% endfor %}
</div>
{% endif %}

{% if article.ruling %}
<div class="ruling-info">
    Ruling: <span class="ruling-text">{{ article.ruling }}</span>
</div>
{% endif %}

<main>
    {% if article.intro %}
    <div class="intro-section">
        <p>{{ article.intro }}</p>
    </div>
    {% endif %}

    <div class="case-details-section">
        <div class="details-row">
            {% if article.plaintiff %}
            <div class="detail-item">
                <strong>Plaintiff</strong>
                {{ article.plaintiff }}
            </div>
            {% endif %}
            {% if article.defendant %}
            <div class="detail-item">
                <strong>Defendant</strong>
                {{ article.defendant }}
            </div>
            {% endif %}
        </div>
        <div class="details-row">
            {% if article.case_type %}
            <div class="detail-item">
                <strong>Case Type</strong>
                {{ article.case_type }}
            </div>
            {% endif %}
            {% if article.year_range %}
            <div class="detail-item">
                <strong>Year It Took</strong>
                {{ article.year_range }}
            </div>
            {% endif %}
        </div>
        
        {% if article.judges %}
        <div class="detail-item">
            <strong>Judges & Opinions</strong>
            <ul class="judges-list">
                {% for judge in article.judges %}
                <li class="judge-item">
                    <span>{{ judge.name }}</span>
                    <span class="opinion {{ judge.opinion }}">
                        {% if judge.opinion == 'yes' %}Favored{% elif judge.opinion == 'concurring' %}Favored (Concurring){% else %}Dissented{% endif %}
                    </span>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        {% if article.acts or article.citations %}
        <div class="thin-separator" style="margin-top: 30px; margin-bottom: 30px;"></div>
        <div class="acts-citations-row">
            {% if article.acts %}
            <div class="detail-item">
                <strong>Acts & Sections Used [ {{ article.acts|length }} ]</strong>
                <ul>
                    {% for act in article.acts %}
                    <li>{{ act }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            {% if article.citations %}
            <div class="detail-item">
                <strong>Key Citations [ {{ article.citations|length }} ]</strong>
                <ul>
                    {% for citation in article.citations %}
                    <li>{{ citation }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>

    {% if article.timeline %}
    <h3 class="section-heading">Case Progression Timeline</h3>
    <div class="timeline-section">
        <div class="timeline-line"></div>
        {% for item in article.timeline %}
        <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-card">
                <h4>{{ item.title }}</h4>
                <p>{{ item.description }}</p>
                <span class="date">{{ item.date }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if article.petitioner_arguments or article.respondent_arguments %}
    <div class="arguments-section">
        <h3 class="section-heading">ARGUMENTS</h3>
        <div class="arguments-grid">
            {% if article.petitioner_arguments %}
            <div class="petitioners-case">
                <h4>Petitioner's Case</h4>
                <ol>
                    {% for arg in article.petitioner_arguments %}
                    <li>{{ arg }}</li>
                    {% endfor %}
                </ol>
            </div>
            {% endif %}
            {% if article.respondent_arguments %}
            <div class="respondents-case">
                <h4>Respondent's Case</h4>
                <ol>
                    {% for arg in article.respondent_arguments %}
                    <li>{{ arg }}</li>
                    {% endfor %}
                </ol>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    {% if article.analysis %}
    <div class="thin-separator"></div>
    <div class="analysis-section">
        <h3 class="section-heading">COURT'S ANALYSIS</h3>
        <p>{{ article.analysis }}</p>
    </div>
    {% endif %}

    {% if article.verdict_points %}
    <div class="small-font-section">
        <h4>FINAL VERDICT</h4>
        <ul>
            {% for point in article.verdict_points %}
            <li>{{ point }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if article.ratio_decidendi %}
    <div class="small-font-section">
        <h4>RATIO DECIDENDI</h4>
        <p>{{ article.ratio_decidendi }}</p>
    </div>
    {% endif %}

    {% if article.case_number or article.hearing_dates %}
    <div class="metadata-footer">
        {% if article.case_number %}Case No: {{ article.case_number }}{% endif %}
        {% if article.bench_size %} | Bench: {{ article.bench_size }}-Judge Constitution Bench{% endif %}
        {% if article.counsel_petitioner or article.counsel_respondent %}
            | Counsel: 
            {% if article.counsel_petitioner %}{{ article.counsel_petitioner }} (Petitioner){% endif %}
            {% if article.counsel_petitioner and article.counsel_respondent %}, {% endif %}
            {% if article.counsel_respondent %}{{ article.counsel_respondent }} (Respondent){% endif %}
        {% endif %}
        {% if article.hearing_dates %} | Hearing Dates: {{ article.hearing_dates }}{% endif %}
    </div>
    {% endif %}
</main>
{% endblock %}
